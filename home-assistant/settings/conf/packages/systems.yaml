---
sensor:
  # Available Versions
  - platform: command_line
    name: AppDaemon Available
    command: >-
      curl -L
      -H "User-Agent: Home Assistant"
      -H "Content-Type: application/json"
      https://pypi.python.org/pypi/appdaemon/json
    value_template: '{{ value_json.info.version }}'
    scan_interval: 1800

  - platform: command_line
    name: Mosquitto Available
    command: >-
      curl -L
      -H "User-Agent: Home Assistant"
      -H "Content-Type: application/json"
      https://api.github.com/repos/eclipse/mosquitto/tags
    value_template: '{{ value_json[0].name[1:] }}'
    scan_interval: 1800

  - platform: command_line
    name: Portainer Available
    command: >-
      curl -L
      -H "User-Agent: Home Assistant"
      -H "Content-Type: application/json"
      https://api.github.com/repos/portainer/portainer/releases/latest
    value_template: '{{ value_json.tag_name }}'
    scan_interval: 1800

  - platform: command_line
    name: ps4-waker Available
    command: >-
      curl -L
      -H "User-Agent: Home Assistant"
      -H "Content-Type: application/json"
      https://api.github.com/repos/dhleong/ps4-waker/releases/latest
    value_template: '{{ value_json.tag_name }}'
    scan_interval: 1800

  - platform: command_line
    name: TasmoAdmin Available
    command: >-
      curl -L
      -H "User-Agent: Home Assistant"
      -H "Content-Type: application/json"
      https://api.github.com/repos/reloxx13/TasmoAdmin/releases/latest
    value_template: '{{ value_json.tag_name[1:] }}'
    scan_interval: 1800

  - platform: command_line
    name: Tasmota Available
    command: >-
      curl -L
      -H "User-Agent: Home Assistant"
      -H "Content-Type: application/json"
      https://api.github.com/repos/arendst/Sonoff-Tasmota/releases/latest
    value_template: '{{ value_json.tag_name[1:] }}'
    scan_interval: 1800

  - platform: command_line
    name: Yi Hack Available
    command: >-
      curl -L
      -H "User-Agent: Home Assistant"
      -H "Content-Type: application/json"
      https://api.github.com/repos/shadow-1/yi-hack-v3/releases/latest
    value_template: '{{ value_json.tag_name }}'
    scan_interval: 1800

  - platform: version
    name: HASS Available
    source: docker
    beta: true

  # Installed Versions
  - platform: command_line
    name: ps4-waker Installed
    command: ps4-waker --version

  - platform: command_line
    name: Yi Hack Installed
    command: >
      ssh -i /config/id_rsa -o StrictHostKeyChecking=no
      root@kitchen-camera.phil.lan
      cat /home/yi-hack-v3/.hackinfo | grep VERSION | awk -F= \'{ print $2 }\'

  - platform: version
    name: HASS Installed

    # Networking
  - platform: cert_expiry
    name: SSL Expiry
    host: !secret ssl_cert_host

  - platform: filter
    name: Filtered Speedtest Download
    entity_id: sensor.speedtest_download
    filters:
      - filter: lowpass
        time_constant: 10
        precision: 2

  - platform: filter
    name: Filtered Speedtest Ping
    entity_id: sensor.speedtest_ping
    filters:
      - filter: lowpass
        time_constant: 10
        precision: 2

  - platform: filter
    name: Filtered Speedtest Upload
    entity_id: sensor.speedtest_upload
    filters:
      - filter: lowpass
        time_constant: 10
        precision: 2

speedtestdotnet:
